<div id="canvas">
  
  <svg version=1.1 id="game_area"
    baseprofile="full"
    mlns="http://www.w3.org/2000/svg"  
	xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:ev="http://www.w3.org/2001/xml-events"

    width="<%= @h ["scenario"] ["carte"] ["largeur_image"] %>"
    height="<%= @h ["scenario"] ["carte"] ["hauteur_image"] %>"
    preserveAspectRatio="xMinYMin">

    <defs>   
      <%= render 'shared/image_base' %>
      <%= render 'shared/units' %>
      <%= render 'shared/clipping_area' %>
    </defs>
	
    <g id="layer1"
      transform="scale(<%= @context.scale %>) 
      translate(<%= Grid.x_translation(@context) %>, <%= Grid.y_translation(@context) %>)" >
      <use xlink:href="#image_base" style="opacity:0.5" />     
    </g>
    <g id="layer2"
      transform="scale(<%= @context.scale %>)
      translate(<%= Grid.x_translation(@context) %>, <%= Grid.y_translation(@context) %>)" >
      <use xlink:href="#image_base" style="clip-path: url(#rectClip);" />     
      <use xlink:href="#units" style="clip-path: url(#rectClip);" />     
    </g>

	</svg>
</div>